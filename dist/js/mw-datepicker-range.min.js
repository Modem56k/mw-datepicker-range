/**
* @version v1.1.0
* @link https://github.com/MrWook/mw-datepicker-range
* @license MIT
* Copyright (c) 2018} MrWook
*/

!function(f,m){"use strict";f.module("mw-datepicker-range",["ui.bootstrap.datepicker","ui.bootstrap.datepickerPopup","mw-datepicker-range-template"]),f.module("mw-datepicker-range").config(["$provide","$injector",function(e,t){t.has("uibDatepickerDirective")&&e.decorator("uibDatepickerDirective",["$delegate","mwMultiSelectService",function(e,d){var t=e[0],p=t.link;return t.compile=function(){return function(i,e,o,t){p.apply(this,arguments),i.selected_dates=[];var r=void 0,n=d.get_last_datepicker();if(o.mwMultiSelect===m){var a=f.element(document.getElementById(n));(r=a.attr("mw-multi-select"))!==m&&a.scope().$watchCollection(r,function(e){i.selected_dates=e||[]})}else r=o.mwMultiSelect,i.$parent.$watchCollection(r,function(e){i.selected_dates=e||[]});if(r!==m){var c=function(){var e=l.$$scope[o.ngModel];if(e||multi_select_element===m||(e=l.$$scope.date),e){var t=Math.round(+e.setHours(0,0,0,0)),r=i.selected_dates;if(i.selected_type){if(!r.length||1<r.length||r[0]==t)return r.splice(0,r.length,t);r.push(t);var n=new Date(Math.min.apply(null,r)),a=new Date(Math.max.apply(null,r));for(n=new Date(n.setDate(n.getDate()+1));n<a;)r.push(Math.round(+n.setHours(0,0,0,0))),n=new Date(n.setDate(n.getDate()+1))}}};o.$observe("mwMultiSelectType",function(e){i.selected_type=!!e&&"false"!==e}),i.selected_type=!0;for(var l=t[1],s=!0,u=0;u<l.$viewChangeListeners.length;u++)""+l.$viewChangeListeners[u]==""+c&&(s=!1);s&&l.$viewChangeListeners.push(c)}}},e}]);t.has("uibDatepickerPopupDirective")&&e.decorator("uibDatepickerPopupDirective",["$delegate","$filter","$timeout",function(e,l,s){var t=e[0],u=t.link;return t.compile=function(){return function(e,t,a,r){u.apply(this,arguments);var i=r[0],o=a.mwMultiSelect;if(o!==m){var n=function(e){o=a.mwMultiSelect;var n=a.uibDatepickerPopup||"dd.MM.y";s(function(){var e=i.$$scope[o];e===m&&(e=[]);var t="",r="";0<e.length&&(t=l("date")(l("orderBy")(e)[0],n),1<e.length&&(r=" - "+l("date")(l("orderBy")(e,"-")[0],n))),i.$setViewValue(t+r),i.$render()},0)};i.$viewChangeListeners=[function(){e[a.ngModel]=i.$modelValue}],i.$formatters=[function(e){n()}],i.$parsers=[function(e){n()}];var c=e.select;e.select=function(e,t){c(e,t);var r=a.mwMultiSelect;null===e?i.$$scope[r]=[]:"today"===e&&(i.$$scope[r]=[(new Date).setHours(0,0,0,0)])}}}},e}])}]),f.module("mw-datepicker-range").directive("mwMultiSelect",["$compile","mwMultiSelectService",function(r,s){return{priority:1001,terminal:!0,compile:function(e,t){var i=t.mwMultiSelect,o=t.datepickerOptions,c=t.id;c===m&&(c="mwDatePickerRange-"+Math.floor(1e3*Math.random()),e.attr("id",c)),e.attr("close-on-date-selection",!1),e.attr("onkeypress","return false;"),e.attr("readonly","");var l=r(e,null,1001);return function(r){var n=void 0;r[o]===m&&(r[o]={}),r.$watch(t.isOpen,function(e){e&&s.set_last_datepicker(c)}),r[o].customClass!==m&&(n=r[o].customClass);var a="";r[o].customClass=function(e){n!==m&&(a=n(e)),r[i]===m&&(r[i]=[]);var t=Math.round(+e.date.setHours(0,0,0,0));return-1<r[i].indexOf(t)||-1<r[i].indexOf(t+36e5)?a+" selected":a},l(r)}}}}]),f.module("mw-datepicker-range").directive("stDateRange",["$filter",function(i){return{restrict:"E",require:"^stTable",scope:{selectedDates:"="},templateUrl:"stDateRange.html",link:function(r,e,t,n){var a=t.predicate;r.open=function(e){e.preventDefault(),e.stopPropagation(),r.is_open=!r.is_open},r.$watch("is_open",function(e){if(!e){var t={};r.selectedDates===m&&(r.selectedDates=[]),1<r.selectedDates.length?(t.before=i("date")(i("orderBy")(r.selectedDates)[0],"y-MM-dd"),t.after=i("date")(i("orderBy")(r.selectedDates,"-")[0],"y-MM-dd")):t=i("date")(i("orderBy")(r.selectedDates)[0],"y-MM-dd"),n.search(t,a)}})}}}]),f.module("mw-datepicker-range").filter("customFilter",["$filter",function(e){var r=e("filter"),a=function(e,t){return t=(""+t).toLowerCase(),-1<(""+e).toLowerCase().indexOf(t)};return function(e,t){return r(e,t,function(e,t){if(f.isObject(t)){var r=t.before,n=t.after;if(r&&n)try{return!(new Date(e)<new Date(r))&&new Date(e)<=new Date(n)}catch(e){return!1}return a(e,t)}return a(e,t)})}}]),f.module("mw-datepicker-range").service("mwMultiSelectService",["$filter",function(n){var e={parse:function(e,t){e===m&&(e=[]);var r={};return 0<e.length&&(r.before=n("orderBy")(e)[0],t!==m&&(r.before=n("date")(r.before,t)),1<e.length&&(r.after=n("orderBy")(e,"-")[0],t!==m&&(r.after=n("date")(r.before,t)))),r}},t=void 0;return e.set_last_datepicker=function(e){t=e},e.get_last_datepicker=function(){return t},e}]),f.module("mw-datepicker-range-template",[]).run(["$templateCache",function(e){e.put("stDateRange.html",'<div class="input-group"><input type="text" class="form-control" ng-model="date" mw-multi-select="selectedDates" datepicker-append-to-body="true" uib-datepicker-popup="yyyy/MM/dd" is-open="is_open" datepicker-options="dateOptions"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button></span></div>')}])}(angular);
//# sourceMappingURL=mw-datepicker-range.min.js.map